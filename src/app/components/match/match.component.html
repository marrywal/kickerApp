<div class="content-center" id="matches">

  <button mat-raised-button routerLink="/match/0" color="primary">
    <mat-icon>add</mat-icon>
    Neues Match
  </button>

  <table mat-table multiTemplateDataRows [dataSource]="matchList" class="mat-elevation-z8" id="matchesList">
    <ng-container matColumnDef="date">
      <th mat-header-cell *matHeaderCellDef>Datum</th>
      <td mat-cell *matCellDef="let element">{{element.date | date: 'd.MM.y'}}</td>
    </ng-container>

    <ng-container matColumnDef="city">
      <th mat-header-cell *matHeaderCellDef>Standort</th>
      <td mat-cell *matCellDef="let element">{{element.city}}</td>
    </ng-container>

    <ng-container matColumnDef="mode">
      <th mat-header-cell *matHeaderCellDef>Modus</th>
      <td mat-cell *matCellDef="let element">{{element.mode}}</td>
    </ng-container>

    <ng-container matColumnDef="teamone">
      <th mat-header-cell *matHeaderCellDef>Team 1</th>
      <td mat-cell *matCellDef="let element">
        <div>
          {{ element.teamTwo.playerOne }}<br>
          {{ element.teamTwo.playerTwo }}
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="endresult">
      <th mat-header-cell *matHeaderCellDef>Endergebnis</th>
      <td mat-cell *matCellDef="let element">
        {{element.teamOne.points}} : {{element.teamTwo.points}}
      </td>
    </ng-container>

    <ng-container matColumnDef="teamtwo">
      <th mat-header-cell *matHeaderCellDef>Team 2</th>
      <td mat-cell *matCellDef="let element">
        <div>
          {{ element.teamTwo.playerOne }}<br>
          {{ element.teamTwo.playerTwo }}
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let row">
        <button mat-button routerLink="/match/{{row.id}}">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-button (click)="deleteMatch(row)">
          <mat-icon>delete</mat-icon>
        </button>
        <button mat-button (click)="expandedElement = expandedElement === row ? null : row">
          <mat-icon>keyboard_arrow_down</mat-icon>
        </button>
      </td>
    </ng-container>

    <ng-container matColumnDef="expandedDetail">
      <td mat-cell *matCellDef="let row" [attr.colspan]="tableHeader.length">
        <div class="element-detail" [@detailExpand]="row === expandedElement ? 'expanded' : 'collapsed'">
          <div class="element-description">
            <div class="details" *ngFor="let game of row.games">
              <div class="player">
                <div *ngFor="let player of game.lineUpOne.players">
                  <b>{{ player.name }}</b> | {{ player.position }}
                </div>
              </div>
              <div class="points">
                {{ game.lineUpOne.points }} : {{ game.lineUpTwo.points }}
              </div>
              <div class="player">
                <div *ngFor="let player of game.lineUpTwo.players">
                  <b>{{ player.name }}</b> | {{ player.position }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="tableHeader"></tr>

    <tr mat-row [class.row-is-clicked]="clickedRows.has(row)" *matRowDef="let row; columns: tableHeader;"
      class="element-row" [class.expanded-row]="expandedElement === row">
    </tr>
    <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>
  </table>