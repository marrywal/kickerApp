<div class="content-center" id="matches">

  <button mat-raised-button (click)="creaeteEditMatch()" color="primary">
    <mat-icon>add</mat-icon>
    Neues Match
  </button>

  <table mat-table multiTemplateDataRows [dataSource]="matchList" class="mat-elevation-z8" id="matchesList">
    <ng-container matColumnDef="datetime">
      <th mat-header-cell *matHeaderCellDef>Datum & Uhrzeit</th>
      <td mat-cell *matCellDef="let element">{{element.dateTime | date: 'd.M.y H:mm'}}</td>
    </ng-container>

    <ng-container matColumnDef="city">
      <th mat-header-cell *matHeaderCellDef>Standort</th>
      <td mat-cell *matCellDef="let element">{{element.city}}</td>
    </ng-container>

    <ng-container matColumnDef="mode">
      <th mat-header-cell *matHeaderCellDef>Modus</th>
      <td mat-cell *matCellDef="let element">{{element.mode}}</td>
    </ng-container>

    <ng-container matColumnDef="teamone">
      <th mat-header-cell *matHeaderCellDef>Team 1</th>
      <td mat-cell *matCellDef="let element">
        <div *ngFor="let team1 of element.teamOne">
          {{ team1.name}}
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="teamtwo">
      <th mat-header-cell *matHeaderCellDef>Team 2</th>
      <td mat-cell *matCellDef="let element">
        <div *ngFor="let team2 of element.teamTwo">
          {{ team2.name}}
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="endresult">
      <th mat-header-cell *matHeaderCellDef>Endergebnis</th>
      <td mat-cell *matCellDef="let element">{{element.endResult}}</td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef></th>
      <td mat-cell *matCellDef="let row">
        <button mat-button (click)="creaeteEditMatch(row)">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-button (click)="deleteMatch(row)">
          <mat-icon>delete</mat-icon>
        </button>
        <button mat-button (click)="expandedElement = expandedElement === row ? null : row">
          <mat-icon>keyboard_arrow_down</mat-icon>
        </button>
      </td>
    </ng-container>

    <ng-container matColumnDef="expandedDetail">
      <td mat-cell *matCellDef="let row" [attr.colspan]="tableHeader.length">
        <div class="element-detail" [@detailExpand]="row === expandedElement ? 'expanded' : 'collapsed'">
          <div class="element-description">
            <div class="" *ngFor="let game of row.games">
              {{ game.result }}
              <div class="" *ngFor="let line1 of game.lineUpOne">
                <b>{{ line1.player.name }}</b> | {{ line1.position }}
              </div>
              <div class="" *ngFor="let line2 of game.lineUpTwo">
                <b>{{ line2.player.name }}</b> | {{ line2.position }}
              </div>
            </div>
          </div>
        </div>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="tableHeader"></tr>

    <tr mat-row [class.row-is-clicked]="clickedRows.has(row)" *matRowDef="let row; columns: tableHeader;"
      class="element-row" [class.expanded-row]="expandedElement === row">
    </tr>
    <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>
  </table>